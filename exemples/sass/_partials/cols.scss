/* --- VARS --- */
//Margin 
$m: 5%;
//Max cols number
$colnb: 8;
//Widths
$widths: w20 20%, w25 25%, w33 33.33%, w66 66.66%;



@each $width in $widths {
  $wclass: nth($width, 1);
  $wvalue: nth($width, 2);
  .#{$wclass} {
    width: $wvalue;
  }
}

.cols {
  display: flex;
}
.cols.colsm > .col+.col { margin-left: $m; }

//Cols w/ the same width w/o margin
@for $i from 1 through $colnb {
  .cols-#{$i} > .col,
	.colsd > .col:first-child:nth-last-child(#{$i}),
	.colsd > .col:first-child:nth-last-child(#{$i}) ~ .col {
	  width: ((100% / $i));
	}
	//Custom col width
	@each $width in $widths {
	  $wclass: nth($width, 1);
	  $wvalue: nth($width, 2);
	  .cols-#{$i} > .col.#{$wclass},
	  .colsd > .col.#{$wclass} {
	    width: $wvalue;
	  }
	}
}

//Cols w/ the same width w/ margin
@for $i from 1 through $colnb {
    .cols-#{$i}.colsm > .col,
	.colsd.colsm > .col:first-child:nth-last-child(#{$i}),
	.colsd.colsm > .col:first-child:nth-last-child(#{$i}) ~ .col {
	  width: ((100% / $i) - (($m*($i - 1)) / $i));
	}
	//Custom col width
	@each $width in $widths {
	  $wclass: nth($width, 1);
	  $wvalue: nth($width, 2);
	  .cols-#{$i}.colsm > .col.#{$wclass},
	  .colsd.colsm > .col.#{$wclass} {
	    width: $wvalue - (($m*($i - 1)) / $i);
	  }
	}
	.cols-#{$i}.colsm > .col:nth-child(#{$i}n+1) {
	  margin-left: 0;
	}
}

@for $i from 1 through $colnb {
	.cols-#{$i}.colsm > .col {
	  margin-bottom: $m;
	}	
}